{% extends "decision/base.html" %}
{% load static %}
{% block content %}

    <link rel="stylesheet" type="text/css" href="{% static 'decision/main.css' %}">
    <!--
    ================================================================================
    Timer that displays time elapsed since beginning of Trauma
    ================================================================================
    -->

    <div class="container">
        <div class="row">
            <div class="col timer-summary" id="timer">
                <label id="hours">00</label>:<label id="minutes">00</label>:<label id="seconds">00</label>
            </div>
            <div class="col ph-banner">
              <!--
              ================================================================================
              Container for pre-hospital information
              ================================================================================
              -->
              <table class="table cell-size">
                  <tbody>
                  <tr>
                      <td class="td-weight" id="patientWeight">[Weight]</td>
                      <td rowspan="2" id="patientAddlInfo">[Additional Info]</td>
                      <td rowspan="2" id="patientHistory">[History]</td>
                  </tr>
                  <tr>
                      <td class="td-age" id="patientAge">[Age]</td>
                  </tr>
                  </tbody>
              </table>
            </div>
        </div>
    </div>

    <div class="container alert-format scrollable" id="alert_placeholder">
        <!--
        ================================================================================
        JavaScript to create new timer for current session and check for previous alerts

        This script is the same as the one in home.html but with additional calculations
        to compensate for the fact that the Summary page will be opened after the timer
        has started.
        ================================================================================
        -->
        <script type="text/javascript" src="{% static "js/runTimerSummary.js" %}"></script>
        <script type="text/javascript" src="{% static "js/generalAlertSystem.js" %}"></script>
        <script type="text/javascript" src="{% static "js/checkAlertsOnRefresh.js" %}"></script>
    </div>

    <div class="container vitals-format" id="vitals_placeholder">
        <!--
        ================================================================================
        Container for JavaScript vitals system
        ================================================================================
        -->
        <table class="table cell-size">
            <tbody>
            <tr>
                <td rowspan="td-weight" id="hr_display">HR:  </td>
                <td class="td-weight" id="bp_display">SBP:  </td>
            </tr>

            <tr>
                <td rowspan="td-weight" id="shock_display">Shock:  </td>
                <td rowspan="td-weight" id="gcs_display">GCS:  </td>
            </tr>

            <tr>
                <td colspan="2" id="etco2_display">ETCO<sub>2</sub>:  </td>
            </tr>
            </tbody>
        </table>
        <script type="text/javascript" src="{% static "js/updateSummary.js" %}"></script>
    </div>

    <div class="container abcd-banner">
        <!--
        ================================================================================
        Container for ABCD components
        ================================================================================
        -->

        <table class="table cell-size">
            <tbody>
            <tr>
                <td> Airway: ETT taped at
                    <script type="text/javascript">
                        document.write(localStorage.getItem("ETT Depth"))
                    </script>
                    cm
                </td>
            </tr>
            <tr>
                <td> Breathing: BMV at
                    <script type="text/javascript">
                        document.write(localStorage.getItem("BVM BPM"))
                    </script>
                    breaths/min
                </td>
            </tr>
            <tr>
                <td>[Circulation]</td>
            </tr>
            <tr>
                <td> Disability:<br/>
                    Pupils: Right:
                    <script type="text/javascript">
                        document.write(localStorage.getItem("Right Pupil Size"))
                    </script>
                    mm
                    Left:
                    <script type="text/javascript">
                        document.write(localStorage.getItem("Left Pupil Size"))
                    </script>
                    mm
                </td>
            </tr>
            </tbody>
        </table>

    </div>

        <script type="text/javascript">
        $.ajax({
            type:"GET",
            url: '/populateSummary/',
            success: function( data ) {
                localStorage.setItem("Age", data.age);
                document.getElementById('patientAge').innerHTML = data.age + ' yrs';
                document.getElementById('patientWeight').innerHTML = data.weight + ' lbs';
                document.getElementById('patientAddlInfo').innerHTML = data.addInfo;
                document.getElementById('patientHistory').innerHTML = data.history;
            }
        });
    </script>

{% endblock content %}